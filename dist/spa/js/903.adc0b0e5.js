"use strict";(self["webpackChunkmockups"]=self["webpackChunkmockups"]||[]).push([[903],{8204:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ne});var t=a(3673),o=a(2323),n=a(1959),u=a(4417),i=a(533),s=a(1289),d=a(9396),c=a(4554),r=a(4842);const p=(0,t.aZ)({props:{helpKey:null},setup(e){const l=e,a=(0,t.Rr)(),o=(0,d.K)(),n=(0,t.Fl)((()=>o.helpFlag));function u(e){o.provideHelp(l.helpKey)}let i="";const s=()=>{if(n.value){const e=(0,t.h)(a.default()[0]);return i=e.props["class"],e.props["onClick"]=e=>{u(e)},(0,t.h)(r.Z,{class:"responsive-table-btn",label:e.props.label,onClick:e=>{u(e)},onclick:e=>{u(e)},readonly:!0},{append:()=>(0,t.h)(c.Z,{name:"info"})})}return(0,t.h)(a.default()[0],{class:i})};return(e,l)=>((0,t.wg)(),(0,t.j4)(s))}}),m=p,f=m;var v=a(5211);class b{constructor(e){this.filter=e}find(e){const l=Number(this.filter.value);return Object.values(e).filter((e=>e.codigo===l||e.descripcion.toUpperCase().startsWith(this.filter.value.toUpperCase())))}}var w=a(1701);const _=e=>((0,t.dD)("data-v-d0004ff8"),e=e(),(0,t.Cn)(),e),h=_((()=>(0,t._)("thead",{class:"thead-sticky text-left"},[(0,t._)("tr",null,[(0,t._)("th",null,"Codigo"),(0,t._)("th",null,"Descripción")])],-1))),Z=["onClick"],g=(0,t.aZ)({emits:[...w.Z.emits],setup(e){const{onDialogOK:l,onDialogHide:a,onDialogCancel:u,dialogRef:i}=(0,w.Z)(),s=(0,v.X)();let d=(0,n.iH)([]);const c=(0,n.iH)(""),r=new b(c);function p(){d.value=s.find(r)}function m(e){l(e)}return(e,l)=>{const u=(0,t.up)("q-input"),s=(0,t.up)("q-item-section"),r=(0,t.up)("q-btn"),f=(0,t.up)("q-item"),v=(0,t.up)("q-card-section"),b=(0,t.up)("q-virtual-scroll"),w=(0,t.up)("q-card"),_=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(_,{ref_key:"dialogRef",ref:i,onHide:(0,n.SU)(a)},{default:(0,t.w5)((()=>[(0,t.Wm)(w,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:c.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>c.value=e),p],autofocus:"",class:"col",label:"Nombre o codigo"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(s,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{icon:"search",round:"",onClick:p})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{items:(0,n.SU)(d),style:{"max-height":"30vh","min-height":"10vh"},type:"table"},{before:(0,t.w5)((()=>[h])),default:(0,t.w5)((({item:e,index:l})=>[((0,t.wg)(),(0,t.iD)("tr",{key:l,onClick:l=>m(e)},[(0,t._)("td",null,(0,o.zw)(e.codigo),1),(0,t._)("td",null,(0,o.zw)(e.descripcion),1)],8,Z))])),_:1},8,["items"])])),_:1})])),_:1})])),_:1},8,["onHide"])}}});var W=a(4260),y=a(6778),U=a(151),V=a(5589),C=a(3414),k=a(2035),S=a(8240),q=a(9698),Q=a(7518),I=a.n(Q);const D=(0,W.Z)(g,[["__scopeId","data-v-d0004ff8"]]),H=D;I()(g,"components",{QDialog:y.Z,QCard:U.Z,QCardSection:V.Z,QItem:C.Z,QItemSection:k.Z,QInput:r.Z,QBtn:S.Z,QVirtualScroll:q.Z});var j=a(8825);const P=e=>((0,t.dD)("data-v-79793e56"),e=e(),(0,t.Cn)(),e),x=P((()=>(0,t._)("span",{class:"titulo-pagina"},"Factura de venta",-1))),T=P((()=>(0,t._)("span",{class:"comprobante"},"Comprobante #123456",-1))),z=P((()=>(0,t._)("br",null,null,-1))),F=P((()=>(0,t._)("br",null,null,-1))),$=P((()=>(0,t._)("br",null,null,-1))),O={class:"col-auto row items-end justify-end relative-position"},R={class:"col-auto q-pa-sm item-bordered shadow-2 total"},K=P((()=>(0,t._)("br",null,null,-1))),N={class:"row items-center justify-end"},A={class:"row items-center justify-end"},M=P((()=>(0,t._)("br",null,null,-1))),B={class:"shadow-2 total bg-white full-width text-center"},E=(0,t.aZ)({setup(e){const l=(0,j.Z)(),a=(0,n.iH)(""),d=(0,n.iH)(0),c=(0,n.iH)(null);(0,t.bv)((()=>{}));const p=(0,n.qj)([]),m=[{field:"item",label:"Item"},{field:"codigo",label:"Codigo"},{field:"precio",label:"Precio",responsive:!0},{field:"descuento",label:"Descuento"},{field:"impuesto",label:"Impuesto"},{field:"cantidad",label:"Cantidad",responsive:!0},{field:"total",label:"Total"}],v=(0,n.iH)({descripcion:"",codigo:0,cantidad:0,costeTotal:0,costeUnitario:0,fechaIngreso:"",impuesto:0,precioVenta:0});function b(){l.dialog({component:H}).onOk((e=>{v.value=e,setTimeout((()=>{c.value.focus(),c.value.select()}),100)}))}const w=(0,n.iH)(0),_=(0,n.iH)(0),h=(0,n.iH)("%");function Z(){let e="0%",l=v.value.precioVenta*w.value;0!==_.value&&("%"===h.value?(l-=l*(_.value/100),e=`${_.value}%`):(l-=_.value,e=`$${_.value}`)),p.push({codigo:v.value.codigo,item:v.value.descripcion,impuesto:v.value.impuesto,precio:v.value.precioVenta,descuento:e,cantidad:w.value,total:l}),v.value={descripcion:"",codigo:0,cantidad:0,costeTotal:0,costeUnitario:0,fechaIngreso:"",impuesto:0,precioVenta:0},w.value=0,_.value=0}const g=(0,t.Fl)((()=>{let e=0;return p.forEach((l=>{e+=l.total})),e})),W=(0,n.iH)(!0);function y(e){W.value=e.isIntersecting}return(e,U)=>{const V=(0,t.up)("q-space"),C=(0,t.up)("q-select"),k=(0,t.up)("q-btn"),S=(0,t.up)("q-resize-observer"),q=(0,t.up)("q-date"),Q=(0,t.up)("q-popup-proxy"),I=(0,t.up)("q-icon"),D=(0,t.up)("q-card-section"),H=(0,t.up)("q-card"),j=(0,t.up)("q-page-sticky"),P=(0,t.up)("q-page"),E=(0,t.Q2)("intersection"),G=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(P,{class:"column q-ml-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t._)("div",{style:(0,o.j5)({"padding-top":d.value+"px"}),class:"row items-center"},[x,(0,t.Wm)(V),T],4),z,(0,t.Wm)(u.Z,null,{action:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"advance-btn",label:"Añadir producto",onClick:Z})])),default:(0,t.w5)((()=>[(0,t.Wm)(f,{"help-key":""},{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(r.Z),{modelValue:v.value.descripcion,"onUpdate:modelValue":U[0]||(U[0]=e=>v.value.descripcion=e),label:"Producto",readonly:"",onClick:b},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{"help-key":"factura:cantidad"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(r.Z),{ref_key:"cantidadHTML",ref:c,modelValue:w.value,"onUpdate:modelValue":U[1]||(U[1]=e=>w.value=e),modelModifiers:{number:!0},label:"Cantidad",placeholder:"Ingrese cantidad",type:"number"},null,8,["modelValue"])])),_:1}),(0,t.Wm)((0,n.SU)(r.Z),{modelValue:_.value,"onUpdate:modelValue":U[3]||(U[3]=e=>_.value=e),label:"Descuento",placeholder:"Ingrese descuento"},{append:(0,t.w5)((()=>[(0,t.Wm)(C,{modelValue:h.value,"onUpdate:modelValue":U[2]||(U[2]=e=>h.value=e),options:["%","$"]},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),F,(0,t.Wm)(s.Z,{actions:[{icon:"delete",onClick:(e,l)=>{(0,n.SU)(p).splice(l,1)},class:"revert-btn"}],data:(0,n.SU)(p),schema:m,title:"Items"},null,8,["actions","data"]),$,(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",O,[(0,n.SU)(l).platform.is.mobile?((0,t.wg)(),(0,t.j4)(S,{key:0,onResize:U[4]||(U[4]=({height:e})=>{d.value=e})})):(0,t.kq)("",!0),(0,t._)("span",R,[(0,t._)("b",null,"Total: $"+(0,o.zw)((0,n.SU)(g)),1)])])),[[E,y]]),K,(0,t.Wm)(u.Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(r.Z),{modelValue:a.value,"onUpdate:modelValue":U[6]||(U[6]=e=>a.value=e),rules:["date"],label:"Fecha",mask:"date"},{append:(0,t.w5)((()=>[(0,t.Wm)(I,{class:"cursor-pointer",name:"event"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{ref:"qDateProxy",cover:"","transition-hide":"scale","transition-show":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:a.value,"onUpdate:modelValue":U[5]||(U[5]=e=>a.value=e)},{default:(0,t.w5)((()=>[(0,t._)("div",N,[(0,t.wy)((0,t.Wm)(k,{color:"primary",flat:"",label:"Close"},null,512),[[G]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)((0,n.SU)(r.Z),{modelValue:a.value,"onUpdate:modelValue":U[8]||(U[8]=e=>a.value=e),rules:["date"],label:"Fecha Vencimiento",mask:"date"},{append:(0,t.w5)((()=>[(0,t.Wm)(I,{class:"cursor-pointer",name:"event"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{ref:"qDateProxy",cover:"","transition-hide":"scale","transition-show":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:a.value,"onUpdate:modelValue":U[7]||(U[7]=e=>a.value=e)},{default:(0,t.w5)((()=>[(0,t._)("div",A,[(0,t.wy)((0,t.Wm)(k,{color:"primary",flat:"",label:"Close"},null,512),[[G]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"])])),_:1}),M,(0,t.Wm)(u.Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(r.Z),{label:"Nit/CC"}),(0,t.Wm)((0,n.SU)(r.Z),{label:"Nombre"}),(0,t.Wm)((0,n.SU)(r.Z),{label:"Tipo Pago"})])),_:1}),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i.Z,{btns:[{label:"Anular",fn:()=>{(0,n.SU)(l).dialog({component:e.ModalCancelar,componentProps:{mensaje:"¿Seguro que quieres anular?"}}).onOk((e=>{(0,n.SU)(l).notify("Anulado")})).onCancel((()=>{(0,n.SU)(l).notify("Cancelado")}))},class:"revert-btn"},{label:"PDF",fn:()=>{(0,n.SU)(l).notify("Sirve")}},{label:"Guardar",fn:()=>{(0,n.SU)(l).notify("Sirve")}}]},null,8,["btns"])])),_:1})])),_:1})])),_:1}),W.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(j,{key:0,expand:"",position:"top"},{default:(0,t.w5)((()=>[(0,t._)("span",B,[(0,t._)("b",null,"Total: $"+(0,o.zw)((0,n.SU)(g)),1)])])),_:1}))])),_:1})}}});var G=a(4379),L=a(2025),X=a(8516),J=a(5151),Y=a(3944),ee=a(6915),le=a(1007),ae=a(5094),te=a(677);const oe=(0,W.Z)(E,[["__scopeId","data-v-79793e56"]]),ne=oe;I()(E,"components",{QPage:G.Z,QCard:U.Z,QCardSection:V.Z,QSpace:L.Z,QInput:r.Z,QSelect:X.Z,QBtn:S.Z,QResizeObserver:J.Z,QIcon:c.Z,QPopupProxy:Y.Z,QDate:ee.Z,QPageSticky:le.Z}),I()(E,"directives",{Intersection:ae.Z,ClosePopup:te.Z})}}]);
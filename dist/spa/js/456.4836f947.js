"use strict";(self["webpackChunkmockups"]=self["webpackChunkmockups"]||[]).push([[456],{1688:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ue});var t=a(3673),o=a(2323),n=a(1959),u=a(6665),i=a(4417),d=a(533),s=a(1289),c=a(4826),r=a(2946);class m{constructor(e){this.filter=e}find(e){const l=Number(this.filter.value);return Object.values(e).filter((e=>e.codigo===l||e.descripcion.toUpperCase().startsWith(this.filter.value.toUpperCase())))}}var p=a(1701);const v=e=>((0,t.dD)("data-v-07eea74c"),e=e(),(0,t.Cn)(),e),f=v((()=>(0,t._)("thead",{class:"thead-sticky text-left"},[(0,t._)("tr",null,[(0,t._)("th",null,"Codigo"),(0,t._)("th",null,"Descripción")])],-1))),b=["onClick"],w=(0,t.aZ)({emits:[...p.Z.emits],setup(e){const{onDialogOK:l,onDialogHide:a,onDialogCancel:u,dialogRef:i}=(0,p.Z)(),d=(0,r.r)();let s=(0,n.iH)([]);const c=(0,n.iH)(""),v=new m(c);function w(){s.value=d.find(v)}function _(e){l(e)}return(e,l)=>{const u=(0,t.up)("q-input"),d=(0,t.up)("q-item-section"),r=(0,t.up)("q-btn"),m=(0,t.up)("q-item"),p=(0,t.up)("q-card-section"),v=(0,t.up)("q-virtual-scroll"),g=(0,t.up)("q-card"),U=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(U,{ref_key:"dialogRef",ref:i,onHide:(0,n.SU)(a)},{default:(0,t.w5)((()=>[(0,t.Wm)(g,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:c.value,"onUpdate:modelValue":[l[0]||(l[0]=e=>c.value=e),w],autofocus:"",class:"col",label:"Nombre o codigo"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{icon:"search",round:"",onClick:w})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,{items:(0,n.SU)(s),style:{"max-height":"30vh","min-height":"10vh"},type:"table"},{before:(0,t.w5)((()=>[f])),default:(0,t.w5)((({item:e,index:l})=>[((0,t.wg)(),(0,t.iD)("tr",{key:l,onClick:l=>_(e)},[(0,t._)("td",null,(0,o.zw)(e.codigo),1),(0,t._)("td",null,(0,o.zw)(e.descripcion),1)],8,b))])),_:1},8,["items"])])),_:1})])),_:1})])),_:1},8,["onHide"])}}});var _=a(4260),g=a(6778),U=a(151),V=a(5589),Z=a(3414),h=a(2035),y=a(4842),W=a(8240),S=a(9698),C=a(7518),k=a.n(C);const q=(0,_.Z)(w,[["__scopeId","data-v-07eea74c"]]),D=q;k()(w,"components",{QDialog:g.Z,QCard:U.Z,QCardSection:V.Z,QItem:Z.Z,QItemSection:h.Z,QInput:y.Z,QBtn:W.Z,QVirtualScroll:S.Z});var Q=a(8825),H=a(8251);function I(e){const l=Intl.NumberFormat("es-CO");return l.format(e)}var N=a(765);const M=e=>((0,t.dD)("data-v-1b7e9dff"),e=e(),(0,t.Cn)(),e),x=M((()=>(0,t._)("span",{class:"titulo-pagina"},"Factura de venta",-1))),P=M((()=>(0,t._)("span",{class:"comprobante"},"Comprobante #123456",-1))),j=M((()=>(0,t._)("br",null,null,-1))),R=M((()=>(0,t._)("br",null,null,-1))),E=M((()=>(0,t._)("br",null,null,-1))),T={class:"col-auto row items-end justify-end relative-position"},B={class:"col-auto q-pa-sm item-bordered shadow-2 total"},Y=M((()=>(0,t._)("br",null,null,-1))),$={class:"row items-center justify-end"},z={class:"row items-center justify-end"},O=M((()=>(0,t._)("br",null,null,-1))),F={class:"shadow-2 total bg-white full-width text-center"},L=(0,t.aZ)({setup(e){const l=(0,Q.Z)(),a=((0,n.iH)(""),(0,n.iH)(0)),m=(0,n.iH)(null);(0,t.bv)((()=>{}));(0,r.r)();const p=(0,n.iH)([{label:"",value:""}]),v=(0,n.iH)("");let f=(0,n.qj)([]);const b=[{field:"item",label:"Item",type:N.N.STRING},{field:"codigo",label:"Codigo",type:N.N.NUMBER},{field:"precio",label:"Precio",responsive:!0,type:N.N.NUMBER,formatter:I,prefix:"$"},{field:"descuento",label:"Descuento",type:N.N.NUMBER},{field:"impuesto",label:"Impuesto",type:N.N.NUMBER},{field:"cantidad",label:"Cantidad",responsive:!0,type:N.N.NUMBER,formatter:I},{field:"total",label:"Total",type:N.N.NUMBER,formatter:I,prefix:"$"}],w=(0,n.iH)({descripcion:"",codigo:0,cantidad:0,dimension:"",unidadPreferida:"",costeTotal:0,costeUnitario:0,fechaIngreso:"",impuesto:0,precioVenta:0});function _(){l.dialog({component:D}).onOk((e=>{w.value=e,p.value=Object.entries(H.M.instance().getUnits(w.value.dimension)).map((e=>({label:e[1].symbol,value:e[0]})));const l=H.M.instance().dimensions[w.value.dimension].baseUnit;v.value=H.M.instance().getUnits(w.value.dimension)[l].symbol,setTimeout((()=>{m.value.focus(),m.value.select()}),100)}))}const g=(0,n.iH)(0),U=(0,n.iH)(0),V=(0,n.iH)("%");function Z(){let e="0%",l=w.value.precioVenta*g.value;0!==U.value&&("%"===V.value?(l-=l*(U.value/100),e=`${U.value}%`):(l-=U.value,e=`$${U.value}`)),f.push({codigo:w.value.codigo,item:w.value.descripcion,impuesto:w.value.impuesto,precio:w.value.precioVenta,descuento:e,cantidad:g.value,total:l}),w.value={descripcion:"",codigo:0,cantidad:0,dimension:"",unidadPreferida:"",costeTotal:0,costeUnitario:0,fechaIngreso:"",impuesto:0,precioVenta:0},g.value=0,U.value=0}const h=(0,t.Fl)((()=>{let e=0;return f.forEach((l=>{e+=l.total})),e})),W=(0,n.iH)(!0);function S(e){W.value=e.isIntersecting}const C=(0,n.iH)((new Date).toLocaleDateString("es-ES")),k=(0,n.iH)((new Date).toLocaleDateString("es-ES")),q=(0,n.iH)(""),M=(0,n.iH)(""),L=(0,n.iH)("");function G(){f=[],w.value={descripcion:"",codigo:0,cantidad:0,dimension:"",unidadPreferida:"",costeTotal:0,costeUnitario:0,fechaIngreso:"",impuesto:0,precioVenta:0},g.value=0,U.value=0,C.value="",k.value="",q.value="",M.value="",L.value=""}return(e,r)=>{const D=(0,t.up)("q-space"),Q=(0,t.up)("q-select"),H=(0,t.up)("q-btn"),N=(0,t.up)("q-resize-observer"),A=(0,t.up)("q-date"),K=(0,t.up)("q-popup-proxy"),J=(0,t.up)("q-icon"),X=(0,t.up)("q-card-section"),ee=(0,t.up)("q-card"),le=(0,t.up)("q-page-sticky"),ae=(0,t.up)("q-page"),te=(0,t.Q2)("intersection"),oe=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(ae,{class:"column q-ml-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(ee,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(X,null,{default:(0,t.w5)((()=>[(0,t._)("div",{style:(0,o.j5)({"padding-top":a.value+"px"}),class:"row items-center"},[x,(0,t.Wm)(D),P],4),j,(0,t.Wm)(i.Z,null,{action:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"advance-btn",label:"Agregar item",onClick:Z})])),default:(0,t.w5)((()=>[(0,t.Wm)(c.Z,{"help-key":""},{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(y.Z),{modelValue:w.value.descripcion,"onUpdate:modelValue":r[0]||(r[0]=e=>w.value.descripcion=e),label:"Item",readonly:"",onClick:_},null,8,["modelValue"])])),_:1}),(0,t.Wm)(c.Z,{"help-key":"factura:cantidad"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(y.Z),{ref_key:"cantidadHTML",ref:m,modelValue:g.value,"onUpdate:modelValue":r[2]||(r[2]=e=>g.value=e),modelModifiers:{number:!0},label:"Cantidad",placeholder:"Ingrese cantidad",type:"number"},{append:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:v.value,"onUpdate:modelValue":r[1]||(r[1]=e=>v.value=e),options:p.value,"emit-value":"","map-options":""},null,8,["modelValue","options"])])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)((0,n.SU)(y.Z),{modelValue:U.value,"onUpdate:modelValue":r[4]||(r[4]=e=>U.value=e),label:"Descuento",placeholder:"Ingrese descuento"},{append:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:V.value,"onUpdate:modelValue":r[3]||(r[3]=e=>V.value=e),options:["%","$"]},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),R,(0,t.Wm)(s.Z,{actions:[{icon:"delete",onClick:(e,l)=>{(0,n.SU)(f).splice(l,1)},class:"revert-btn"}],data:(0,n.SU)(f),schema:b,title:"Items"},null,8,["actions","data"]),E,(0,t.wy)(((0,t.wg)(),(0,t.iD)("div",T,[(0,n.SU)(l).platform.is.mobile?((0,t.wg)(),(0,t.j4)(N,{key:0,onResize:r[5]||(r[5]=({height:e})=>{a.value=e})})):(0,t.kq)("",!0),(0,t._)("span",B,[(0,t._)("b",null,"Total factura: $"+(0,o.zw)((0,n.SU)(I)((0,n.SU)(h))),1)])])),[[te,S]]),Y,(0,t.Wm)(i.Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(y.Z),{modelValue:C.value,"onUpdate:modelValue":r[7]||(r[7]=e=>C.value=e),label:"Fecha"},{append:(0,t.w5)((()=>[(0,t.Wm)(J,{class:"cursor-pointer",name:"event"},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{ref:"qDateProxy",cover:"","transition-hide":"scale","transition-show":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{modelValue:C.value,"onUpdate:modelValue":r[6]||(r[6]=e=>C.value=e),mask:"DD/MM/YYYY"},{default:(0,t.w5)((()=>[(0,t._)("div",$,[(0,t.wy)((0,t.Wm)(H,{color:"primary",flat:"",label:"Close"},null,512),[[oe]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)((0,n.SU)(y.Z),{modelValue:k.value,"onUpdate:modelValue":r[9]||(r[9]=e=>k.value=e),label:"Fecha Vencimiento"},{append:(0,t.w5)((()=>[(0,t.Wm)(J,{class:"cursor-pointer",name:"event"},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{ref:"qDateProxy",cover:"","transition-hide":"scale","transition-show":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{modelValue:k.value,"onUpdate:modelValue":r[8]||(r[8]=e=>k.value=e),mask:"DD/MM/YYYY"},{default:(0,t.w5)((()=>[(0,t._)("div",z,[(0,t.wy)((0,t.Wm)(H,{color:"primary",flat:"",label:"Close"},null,512),[[oe]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"])])),_:1}),O,(0,t.Wm)(i.Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,n.SU)(y.Z),{label:"Nit/CC",modelValue:q.value,"onUpdate:modelValue":r[10]||(r[10]=e=>q.value=e)},null,8,["modelValue"]),(0,t.Wm)((0,n.SU)(y.Z),{label:"Nombre",modelValue:M.value,"onUpdate:modelValue":r[11]||(r[11]=e=>M.value=e)},null,8,["modelValue"]),(0,t.Wm)(Q,{label:"Tipo Pago",modelValue:L.value,"onUpdate:modelValue":r[12]||(r[12]=e=>L.value=e),options:["Efectivo","Credito"]},null,8,["modelValue"])])),_:1}),(0,t.Wm)(X,null,{default:(0,t.w5)((()=>[(0,t.Wm)(d.Z,{btns:[{label:"Cancelar",fn:()=>{(0,n.SU)(l).dialog({component:u.Z,componentProps:{mensaje:"¿Seguro que quieres cancelar?"}}).onOk((a=>{e.x,(0,n.SU)(l).notify("Factura cancelada"),G()})).onCancel((()=>{(0,n.SU)(l).notify("Cancelado")}))},class:"revert-btn",weight:4},{label:"Documento para impresión",fn:()=>{(0,n.SU)(l).notify("Sirve")}},{label:"Guardar",fn:()=>{(0,n.SU)(l).notify("Sirve")},weight:5}]},null,8,["btns"])])),_:1})])),_:1})])),_:1}),W.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(le,{key:0,expand:"",position:"top"},{default:(0,t.w5)((()=>[(0,t._)("span",F,[(0,t._)("b",null,"Total factura: $"+(0,o.zw)((0,n.SU)(I)((0,n.SU)(h))),1)])])),_:1}))])),_:1})}}});var G=a(4379),A=a(2025),K=a(3017),J=a(5151),X=a(4554),ee=a(3944),le=a(6915),ae=a(1007),te=a(5094),oe=a(677);const ne=(0,_.Z)(L,[["__scopeId","data-v-1b7e9dff"]]),ue=ne;k()(L,"components",{QPage:G.Z,QCard:U.Z,QCardSection:V.Z,QSpace:A.Z,QInput:y.Z,QSelect:K.Z,QBtn:W.Z,QResizeObserver:J.Z,QIcon:X.Z,QPopupProxy:ee.Z,QDate:le.Z,QPageSticky:ae.Z}),k()(L,"directives",{Intersection:te.Z,ClosePopup:oe.Z})}}]);